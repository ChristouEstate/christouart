#!/usr/bin/env python3
from pathlib import Path
import re

START, END = 1, 49

TEXTBLOCK_RE = re.compile(r'(<div\s+class="text-block"\s*>)(.*?)(</div>)', re.DOTALL)
EN_MARK_RE = re.compile(r'<p>\s*<strong>\s*EN:\s*</strong>\s*</p>', re.IGNORECASE)
DE_MARK_RE = re.compile(r'<p>\s*<strong>\s*DE:\s*</strong>\s*</p>', re.IGNORECASE)

def split_by_lang(block_inner):
    en_m = EN_MARK_RE.search(block_inner)
    de_m = DE_MARK_RE.search(block_inner)
    if not en_m or not de_m:
        return None, None
    if en_m.start() < de_m.start():
        en = block_inner[en_m.start():de_m.start()]
        de = block_inner[de_m.start():]
    else:
        de = block_inner[de_m.start():en_m.start()]
        en = block_inner[en_m.start():]
    return en.strip(), de.strip()

def process_file(path):
    html = path.read_text(encoding="utf-8", errors="ignore")
    m = TEXTBLOCK_RE.search(html)
    if not m:
        return False
    open_div, inner, close_div = m.groups()
    en, de = split_by_lang(inner)
    if not en or not de:
        return False
    new_inner = f"{en}\n      <hr />\n      {de}"
    new_block = f"{open_div}\n      {new_inner}\n    {close_div}"
    path.write_text(html[:m.start()] + new_block + html[m.end():], encoding="utf-8")
    return True

def main():
    changed = missing = failed = 0
    for i in range(START, END + 1):
        p = Path(f"image{i}.html")
        if not p.exists():
            missing += 1
            continue
        if process_file(p):
            changed += 1
        else:
            failed += 1
    print(f"Done. Changed: {changed}, missing: {missing}, failed: {failed}")

if __name__ == "__main__":
    main()
Ã¸
cd ~/Documents/GitHub/christouart

python3 reorder_lang_1_49.py


